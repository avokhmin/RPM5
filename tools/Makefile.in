CC = @CC@
CPP = @CPP@

srcdir = @srcdir@
VPATH = $(srcdir)

PROGS = rpmlead rpmheader rpmarchive rpmsignature dump dumpdb
LOADLIBES = @LIBS@ @ZLIB@

ifeq (.depend,$(wildcard .depend))
TARGET=everything
else
TARGET=depend everything
endif

all: $(TARGET)

everything: $(PROGS)

clean:
	rm -f *.a *.o core *~ $(PROGS)

depend:
	$(CPP) $(CFLAGS) -M *.c > .depend

$(PROGS): ../lib/librpm.a

ifeq (.depend,$(wildcard .depend))
include .depend
endif
