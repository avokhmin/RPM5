
  TODO
  ====

  RELEASE ENGINEERING ROADMAP
  ---------------------------

  This is the current RPM 5.0 release engineering roadmap:

  1. weekly Alpha releases in November 2007:
     - APIs:     still changing, no guarantees at all for stability
     - code:     still acceptable to be at least partly broken
     - audience: early adopters in RPM community only
     - purpose:  to get initial feedback
 
     2007-11-10  RPM 5.0a1   RPM 5.0 alpha 1                [DONE]
     2007-11-19  RPM 5.0a2   RPM 5.0 alpha 2                [DONE]
     2007-11-24  RPM 5.0a3   RPM 5.0 alpha 3                [DONE]
     2007-12-02  RPM 5.0a4   RPM 5.0 alpha 4                [DONE]
 
  2. weekly Beta releases in December 2007:
     - APIs:     mostly fixed, nearly a guarantee to be stable
     - code:     already stable, but perhaps still some subtle bugs
     - audience: RPM community, especially distro vendors
     - purpose:  to get final feedback
   
     2007-12-09  RPM 5.0b1   RPM 5.0 beta 1                 [DONE]
     2007-12-15  RPM 5.0b2   RPM 5.0 beta 2                 [TODO]
     2007-12-22  RPM 5.0b3   RPM 5.0 beta 3                 [TODO]
     2007-12-29  RPM 5.0b4   RPM 5.0 beta 4                 [TODO]
   
  3. release in January 2008:
     - APIs:     fully fixed, guaranteed to be kept stable
     - code:     stable, no more bugs known bugs left 
     - audience: RPM community as a whole
     - purpose:  provide RPM 5.0
   
     2007-01-05  CVS HEAD is branched into    RPM 5.0.x     [TODO]
     2007-01-05  CVS HEAD now becomes base of RPM 5.1.DEVEL [TODO]
     2007-01-05  RPM 5.0.0   RPM 5.0 patchlevel 0           [TODO]
     2007-01-05  press release                              [TODO]
     ...

  KNOWN PENDING ISSUES
  --------------------

  This is the list of known pending issues which still *HAVE* to be
  resolved during release engineering. Please do not just list any
  *CANDO* items.

  o to be resolved before RPM 5.0b2:
    - jbj: HEAD segfaults under "devtool standalone"'s test-drive as it
           builds RPM with prefix="/tmp/rpm" (see line 309 in
           devtool.conf). When one uses a longer prefix, e.g.
           prefix="/tmp/rpm-xxx", the segfault disappears!!!
    - jbj: RPM_I18NSTRING_TYPE is still wonky, one test needed is to see
	whether rpm-python h['summary'] returns a string (which is correct)
	or an argv tuple (which is broken). There's more to do here:
	$ rpm -qa --yaml
rpm: header.c:1897: rpmheRealloc: Assertion `he->c == 1' failed.
	You need packages with Summary(lo): to see the assertion failure.

  o to be resolved before RPM 5.0.0:
    - rse: xar/ has weak (think RPM_CHECK_LIB) support its third-party
           libraries LibXML, OpenSSL, etc. But we at least support building
           against external XAR, so this issue is no longer such dramatic IMHO.
    - rse: NEWS polishing
    - jbj: fix openssl RSA signature verification.
    - jbj: finish Requires: sanitycheck(N) = E:V-R runtime probe.
    - jbj: finish BuildRequires: vcheck(N) = E:V-R runtime probe.
    - jbj: write up added featlets/bugtures in %docdir notes.
    - jbj: rpmbuild --sign is functional. However, behavior may have changed
	for empty passwords when not using linux keyutils. Should I care?
    - jbj: handle SourceN: foo-V-R.src.rpm unpacking.
    - jbj: fix (or at least document) the /sbin/ldconfig optimization flaw.
    - jbj: finish --trust with --import (or punt to 5.1).
    - jbj: add build script templates for install scriptlets (or punt to 5.1).
    - jbj: add the wiring for RPMTAG_CLASS as an arbitrary tag.
    - jbj: change RPM_I18NSTRING_TYPE wiring to use arbitrary tag.
    - jbj: add lazy mkdir -p to handle packaging pathologies like in
	devtool-test.spec (no mkdir -p in %install).
    - jbj: fold-in patch-as-plain-macro at first convenient opportunity.
    - jbj: ditto, patch-as-plain-macro.
    - jbj: add macro disabler for scriptlet interpreter dependencies, fold
	in no-require-bin-sh patch.
    - jbj: Mandriva perl-URPM "make test" indicates a problem querying binary
	package headers that would be produced by a spec file.
	Dvalin has found that reverting this patch
		http://rpm5.org/cvs/chngview?cn=6994
	restores legacy behavior (but breaks other "stuff" I believe). So
	the patch needs some re-balancing before being added to rpm-5.0.
    - jbj: memory leak seen with repackaging
==4811== 249 bytes in 3 blocks are definitely lost in loss record 1 of 1
==4811==    at 0x4805525: malloc (vg_replace_malloc.c:149)
==4811==    by 0x48E1C14: copyEntry (header.c:1446)
==4811==    by 0x48E33A6: headerNext (header.c:2208)
==4811==    by 0x48DF183: headerRegenSigHeader (hdrNVR.c:303)
==4811==    by 0x4877D11: rpmpsmStage (psm.c:1904)
==4811==    by 0x4876C7D: rpmpsmNext (psm.c:1580)
==4811==    by 0x48790C2: rpmpsmStage (psm.c:2244)
==4811==    by 0x48A9C83: rpmtsRun (transaction.c:1689)
==4811==    by 0x4897D28: rpmErase (rpminstall.c:627)
==4811==    by 0x43FC: main (rpmqv.c:678)
    - jbj: markReplacedFiles() subtly rewrites header back into rpmdb
	with altered RPMTAG_FILESTATES data. get/del/add sequence
	is needed instead.
    - jbj: rpm-5.0 is almost compilation warning free, some effort to remove
	the Mickey Mouse warnings that remain should be undertaken.
    - jbj: retrieved headers are occaisionally failing sanity checks.
    - jbj: VSFlags (and --nodigest/--nosignature) is now global rather than
	persistently per-transaction. That means its no longer possible to
	have two transactions, one which verifies signatures while the other
	does not. Per-transaction VSFlags never made much sense imho, but
	some may care. Establishing a end-user, not a per-application or
	per-transaction, package integrity/security policy is the only
	rational end-point.
    - jbj: get rid of undocumented construction scaffholding options like
	--nolead and --newmagic. There's --rsegfault/--wsegfault too,
	but I kinda like the irony of delivering a program that will randomly
	assert(0) fail on demand. Demonstrating stale look removal to the
	Berkeley DB haters may still be essential and necessary rpm
	functionality imho.
    - jbj: blueprinting *.rpm and *.src rpm contents built with
	rpm-4.5 and rpm-5.0 indicates another possible signature padding
	calculation problem (- is 4.5 built src.rpm, + is 5.0 built src.rpm)
-  Sigsize: 107888
-  Pkgid:     !!binary YkBolGxVnon0gGm8YV5lug==
-  Hdrid: 827180de364f6948e94623b29dffa13e45898227
+  Sigsize: 107896
+  Pkgid:     !!binary pM5VJBrMT40gEk4TSvNrdA==
+  Hdrid: 72a11d90029ae1fbd61cd3741f4bb25681d8546d
	(other contents are now identical after fixing RPMTAG_BUILDTIME).
    - jbj: there's a buildroot compatibility issue that needs to be addressed
	in (at least) doco. The problem is common to rpm-4_5 and HEAD.
	Issue at
		http://qa.mandriva.com/show_bug.cgi?id=34705
    - jbj: both --yaml and --xml are in need of a QA sanity check. All that
	needs doing is insuring that rpm qa --yaml can be loaded by some
	existing yaml parser, and that the xml parses correctly. The YAML
	is likelier to be borked than the XML.
    - jbj: make a complete pass through rpm.org check-ins and make sure they
	have exactly zero "features" that are not already in rpm-5.0. With
	full attribution of course ...


  RPM 5.1 ROADMAP ISSUES
  ----------------------
    - jbj: Heh, --import has *always* used the wrong data type for
	Summary/Description/Group. The header that carries the pubkey
	lacks RPMTAG_ARCH/RPMTAG_OS as well. Re-importing all pubkeys is
	one solution, but perhaps a "just works" slam-dunk hack is needed
	during --rebuildb, or with header extensions. When this issue is
	resolved, then rpm can/should use implicit, rather than explicit, data
	types for tag data.
    - jbj: add libTomCrypt signature verification.
    - jbj: add per-implementation crypto hashes.
    - jbj: add per-implementation symmetric ciphers.
    - jbj: permit per-file encryption with password caching through keyutils.
    - jbj: generalize the Leopard XAR format to ar (as in *.deb), tar, and cpio.
    - jbj: eliminate the oddball *.src.rpm paths, nuke rpmInstallSourcePackage.
    - jbj: VPATH-like generalization to fold-in splitted-source-directory patch.
    - jbj: add per file RPMTAG_ENTROPY a la Shannon to start making the choice
	of compression scheme computible.
    - jbj: explicitly compute sums of header and package sizes to help
	distro maintainers understand their cdrom/dvd and memory footprint
	needs.
    - jbj: split rpmtsRun() into 2 pieces, moving the file resolution
	computation into its own method.
    - jbj: redesign the bleeping callback, which is good for nothing but pushing
	script kiddie progress bars across the screen.
    - jbj: arbitrary "%foo -p /bar" scriptlets as pair'ed RPMTAG_{FOO,FOOPROG}.
    - jbj: arbitrary triggers, like scriptlets, but with a condition check too.
	
