.\" This manpage has been automatically generated by docbook2man 
.\" from a DocBook document.  This tool can be found at:
.\" <http://shell.ipoline.com/~elmert/comp/docbook2X/> 
.\" Please send any bug reports, improvements, comments, patches, 
.\" etc. to Steve Cheng <steve@ggi-project.org>.
.\"
.\" This program is free software; you can redistribute it and/or modify
.\" it under the terms of the GNU General Public License as published by
.\" the Free Software Foundation; either version 2, or (at your option)
.\" any later version.
.\"
.\" This program is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public License
.\" along with this program; if not, write to the Free Software
.\" Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, 
.\" USA.
.\"
.\" Japanese Version Copyright (C) 2003 System Design and Research
.\" Institute Co.,Ltd. All rights reserved.
.\"
.\" Translated 14 March 2003 by
.\"   System Design and Research Institute Co.,Ltd. <info@sdri.co.jp>
.\"
.\"WORD: RFE		改善要求	(Request For Enhancement)
.\"
.TH "RPMCACHE" "8" "05 July 2002" "Red Hat, Inc." "Red Hat Linux"
.SH 名前
rpmcache \- RPM パッケージのへッダ情報をキャッシュする
.SH 書式
\fBrpmcache\fR [ \fB\fIPACKAGE_NAME\fB\fR\fI ...\fR ]
.SH 説明
.B rpmcache
はファイルツリーを歩きまわり(リモートの\fBFTP\fRかもしれない)、
.BR glob (7)
の式を使ってパスをフィルタリングし、rpm パッケージのへッダを読み込む。
最新の(すなわち同じパッケージ名のものに対し、
パッケージのエポック・バージョン・リリースを比較し、
それが同じであればビルド日付を使って比較した)パッケージのへッダーが
他のものと重複しなければ、rpm データベースにキャッシュされる。
不明な依存性を解消するパッケージの場所を提案するために、rpm データベースの
キャッシュを利用することができる。
.PP
.B rpmcache
固有のオプションはなく、
.B rpm
関連のツールで共通のオプションだけである。
現時点で何が実装されているかについては、
.B rpmcache
の使用方法のメッセージ(訳注: "rpmcache \-\-help")を参照のこと。
.PP
検索対象のファイルツリーの場所は rpm マクロを使って設定される。
最終的な場所は、独立した 5 つの要素を結合したものである。
.B rpmcache
を設定するのに使用されるマクロ名を以下に示す。
下記の表示順と同じ順番で各要素が結合されて、
検索されるファイルツリーの場所が生成される。
.TP
\fB%_bhpath\fR
"path"レベル。
検索されるファイルツリーのパス(または URL)の先頭部分。
.BR glob (7)
の式はここでは使えない。
.TP
\fB%_bhcoll\fR
"collection" レベル。
\fB%_bhpath\fR のサブディレクトリーにマッチする文字列(または
.BR glob (7)
式)。
.TP
\fB%_bhN\fR
"name" レベル。
\fB%_bhcoll\fR のサブディレクトリーにマッチする文字列(または
.BR glob (7)
式)。
Red Hat ビルドシステム内でのいずれかの特定のパッケージ名にマッチするよ
うな
.BR glob (7)
式を構成するために
.I PACKAGE_NAME
引数が使用される。
ほぼ確実に、Red Hat 以外の人間が使用することはないだろう。
.TP
\fB%_bhVR\fR
"version-release" レベル。
\fB%_bhN\fR のサブディレクトリーにマッチする文字列(または
.BR glob (7)
式)。
.TP
\fB%_bhA\fR
"arch" レベル。
\fB%_bhVR\fR のサブディレクトリーにマッチする文字列(または
.BR glob (7)
式)。
.PP
キャッシュデータベースの場所もまた、以下のマクロを使用して設定される。
.TP
\fB%_cache_dbpath\fR
キャッシュデータベースの場所。デフォルトは
.IR /var/spool/up2date/cache 。
.PP
キャッシュデータベースのフォーマットは rpm データベースのものと等しく、
コマンドラインの
.B rpm
から利用することができる。
例えば、パッケージのインストールに必要な依存性を満たすパッケージを
提案するためにキャッシュデータベースを利用するには、以下の設定が
.I /etc/rpm/macros
または
.I ~/.rpmmacros
に必要である。
.TP
\fB%_solve_dbpath\fR
依存性を解決する提案のために使用されるデータベースの場所。
.SS Red Hat beehive ツリーのための(最低限の)設定例
訳注: beehive は多分、Red Hat 内部の何らかの名前。
.PP
.nf
%_cache_dbpath  /var/spool/up2date/cache
%_solve_dbpath  %{_cache_dbpath}
%_bhpath        file://localhost/mnt/redhat/beehive/comps/dist
%_bhcoll        7.3
%_bhN           @(basesystem|bash|filesystem|glibc-common|glibc|ldconfig|libtermcap|mktemp|setup|termcap)
%_bhVR          *
%_bhA           @(i[3456]86|noarch)
.fi
.SS Red Hat の FTP ツリーのための(最小)設定例
.nf
%_cache_dbpath  /var/spool/up2date/cache
%_solve_dbpath  %{_cache_dbpath}
%_bhpath        ftp://localhost/mnt/dist
%_bhcoll        @(7.3|7.2|7.1|7.0|6.2|6.1|6.0|5.2|5.1|5.0)
%_bhN           @(%{_arch})
%_bhVR          *
%_bhA           @(i[3456]86|noarch)
.fi
.SH バグ
rpm-devel パッケージに対するバグ報告や改善要求は、bugzilla
.UR http://bugzilla.redhat.com/
http://bugzilla.redhat.com/
.UE
を使って欲しい。
.SH 関連項目
.BR rpm (8),
.BR glob (7),
.UR http://www.rpm.org/
.B http://www.rpm.org/
.UE
.SH 著者
Jeff Johnson <jbj@redhat.com>
